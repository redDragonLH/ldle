<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>onefunction</title>
</head>
<body>

</body>
<script type="text/javascript" src="//cdn.bootcss.com/jquery/2.1.0/jquery.min.js"></script>
<script type="text/javascript">
function runOnce(fn, context) { //控制让函数只触发一次
  return function () {
      try {
          fn.apply(context || this, arguments);
      }
      catch (e) {
          // console.error(e);//一般可以注释掉这行
      }
      finally {
          fn = null;
      }
  }
}

// Usage 1:
var a = 0;
var canOnlyFireOnce = runOnce(function () {
  a++;
  console.log(a);
});

canOnlyFireOnce(); //1
canOnlyFireOnce(); // nothing
canOnlyFireOnce(); // nothing

// Usage 2:
var name = "张三";
var canOnlyFireOnce = runOnce(function () {
  console.log("你好" + name);
});
canOnlyFireOnce(); //你好张三
canOnlyFireOnce(); // nothing

// Usage 3:
var obj = {name: "天涯孤雁", age: 24};
var canOnlyFireOnce = runOnce(function () {
  console.log("你好" + this.name);
}, obj);
canOnlyFireOnce(); //你好天涯孤雁
canOnlyFireOnce(); // nothing
</script>
</html>
